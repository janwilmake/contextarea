<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uithub - GitHub Token Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        .float-animation {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes fadeGtoU {

            0%,
            45% {
                content: 'g';
                opacity: 1;
            }

            50% {
                content: 'g';
                opacity: 0;
            }

            55%,
            100% {
                content: 'u';
                opacity: 1;
                color: purple;
            }
        }

        .fade-g-to-u::before {
            content: 'g';
            animation: fadeGtoU 2s linear forwards;
        }
    </style>
</head>

<body class="bg-black min-h-screen flex flex-col items-center justify-center">
    <div id="content" class="opacity-0 transform translate-y-20 transition-all duration-1000 ease-out mt-20">
        <h1
            class="text-8xl md:text-9xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-8 text-center float-animation">
            <span><span class="fade-g-to-u"></span>ithub</span>
        </h1>
        <p class="text-xl md:text-2xl text-gray-300 mb-8 text-center max-w-2xl">
            GitHub Token Management
        </p>


        <div class="bg-gray-800 p-8 rounded-lg shadow-lg max-w-2xl w-full mx-4">
            <pre class="mb-8 text-gray-300 text-center whitespace-pre-wrap break-words overflow-auto"></pre>

            <div class="mb-8 text-gray-300 text-center">
                Your GitHub access token is only used to authenticate your requests and is never permanently stored in
                our systems.
            </div>

            <div class="flex flex-col space-y-6">
                <div>
                    <label for="saved-tokens" class="block text-gray-300 mb-2">Saved Tokens:</label>
                    <select id="saved-tokens"
                        class="w-full bg-gray-700 text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-purple-500">
                        <option value="">Select a saved token...</option>
                    </select>
                </div>

                <div class="text-center text-gray-300">- OR -</div>

                <div>
                    <label for="new-token" class="block text-gray-300 mb-2">New GitHub Token:</label>
                    <div class="flex space-x-4">
                        <input type="password" id="new-token" spellcheck="false" placeholder="Enter your GitHub token"
                            class="flex-1 bg-gray-700 text-white rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-purple-500">
                        <a href="https://github.com/settings/tokens/new" target="_blank"
                            class="bg-gray-600 text-white px-4 py-3 rounded-lg hover:bg-gray-500 transition-colors duration-300 flex items-center">
                            Get New Token
                        </a>
                    </div>
                </div>

                <button id="submit-token"
                    class="bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-3 px-6 rounded-lg text-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-300">
                    Save & Continue
                </button>
            </div>
        </div>
    </div>

    <script>
        // Show content with animation
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                document.getElementById('content').classList.remove('opacity-0', 'translate-y-20');
            }, 100);

            // Load saved tokens
            const savedTokens = JSON.parse(localStorage.getItem('githubTokens') || '{}');
            const selectElement = document.getElementById('saved-tokens');

            Object.entries(savedTokens).forEach(([username, token]) => {
                const option = document.createElement('option');
                option.value = token;
                option.textContent = username;
                selectElement.appendChild(option);
            });

            // Handle token selection
            selectElement.addEventListener('change', (e) => {
                if (e.target.value) {
                    document.getElementById('new-token').value = e.target.value;
                }
            });

            // Handle form submission
            document.getElementById('submit-token').addEventListener('click', async () => {
                const token = document.getElementById('new-token').value;
                if (!token) {
                    alert('Please enter a token');
                    return;
                }

                try {
                    // Verify token by getting username
                    const response = await fetch('https://api.github.com/user', {
                        headers: {
                            'Authorization': `token ${token}`
                        }
                    });

                    if (!response.ok) {
                        throw new Error('Invalid token');
                    }

                    const userData = await response.json();
                    const username = userData.login;

                    // Save token with username
                    const savedTokens = JSON.parse(localStorage.getItem('githubTokens') || '{}');
                    savedTokens[username] = token;
                    localStorage.setItem('githubTokens', JSON.stringify(savedTokens));

                    // Redirect to current URL with token
                    const currentUrl = new URL(window.location.href);
                    currentUrl.searchParams.set('apiKey', token);
                    window.location.href = currentUrl.toString();

                } catch (error) {
                    alert('Invalid token. Please check and try again.');
                }
            });
        });
    </script>
</body>

</html>